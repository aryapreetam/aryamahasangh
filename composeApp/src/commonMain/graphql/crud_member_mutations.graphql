# Member CRUD Mutations using the comprehensive Supabase functions
# These mutations call the custom functions that provide full business logic

# Create Member with comprehensive details including address fields
mutation InsertMemberDetails(
  $name: String!,
  $phoneNumber: String!,
  $profileImage: String,
  $educationalQualification: String,
  $email: String,
  $dob: Date,
  $addressId: String,
  $aryaSamajId: String,
  $joiningDate: Date,
  $tempAddressId: String,
  $referrerId: String,
  $occupation: String,
  $introduction: String,
  $gender: String,
  # Main address fields for automatic address creation
  $basicAddress: String,
  $state: String,
  $district: String,
  $pincode: String,
  $latitude: Float,
  $longitude: Float,
  $vidhansabha: String,
  # Temporary address fields for automatic temp address creation
  $tempBasicAddress: String,
  $tempState: String,
  $tempDistrict: String,
  $tempPincode: String,
  $tempLatitude: Float,
  $tempLongitude: Float,
  $tempVidhansabha: String
) {
  insertMemberDetails(
    pName: $name,
    pPhoneNumber: $phoneNumber,
    pProfileImage: $profileImage,
    pEducationalQualification: $educationalQualification,
    pEmail: $email,
    pDob: $dob,
    pAddressId: $addressId,
    pAryaSamajId: $aryaSamajId,
    pJoiningDate: $joiningDate,
    pTempAddressId: $tempAddressId,
    pReferrerId: $referrerId,
    pOccupation: $occupation,
    pIntroduction: $introduction,
    pGender: $gender,
    # Main address parameters - Using camelCase to match GraphQL schema
    pBasicAddress: $basicAddress,
    pState: $state,
    pDistrict: $district,
    pPincode: $pincode,
    pLatitude: $latitude,
    pLongitude: $longitude,
    pVidhansabha: $vidhansabha,
    # Temporary address parameters - Using camelCase to match GraphQL schema  
    pTempBasicAddress: $tempBasicAddress,
    pTempState: $tempState,
    pTempDistrict: $tempDistrict,
    pTempPincode: $tempPincode,
    pTempLatitude: $tempLatitude,
    pTempLongitude: $tempLongitude,
    pTempVidhansabha: $tempVidhansabha
  )
}

# Update Member details
mutation UpdateMemberDetailsComprehensive(
  $memberId: String!,
  $name: String = null,
  $phoneNumber: String = null,
  $profileImage: String = null,
  $educationalQualification: String = null,
  $email: String = null,
  $dob: Date = null,
  $addressId: String = null,
  $aryaSamajId: String = null,
  $joiningDate: Date = null,
  $tempAddressId: String = null,
  $referrerId: String = null,
  $occupation: String = null,
  $introduction: String = null,
  $gender: String = null,
  # Main address fields for automatic address creation
  $basicAddress: String = null,
  $state: String = null,
  $district: String = null,
  $pincode: String = null,
  $latitude: Float = null,
  $longitude: Float = null,
  $vidhansabha: String = null,
  # Temporary address fields for automatic temp address creation
  $tempBasicAddress: String = null,
  $tempState: String = null,
  $tempDistrict: String = null,
  $tempPincode: String = null,
  $tempLatitude: Float = null,
  $tempLongitude: Float = null,
  $tempVidhansabha: String = null
) {
  updateMemberDetails(
    pMemberId: $memberId,
    pName: $name,
    pPhoneNumber: $phoneNumber,
    pProfileImage: $profileImage,
    pEducationalQualification: $educationalQualification,
    pEmail: $email,
    pDob: $dob,
    pAddressId: $addressId,
    pAryaSamajId: $aryaSamajId,
    pJoiningDate: $joiningDate,
    pTempAddressId: $tempAddressId,
    pReferrerId: $referrerId,
    pOccupation: $occupation,
    pIntroduction: $introduction,
    pGender: $gender,
    # Main address parameters - Using camelCase to match GraphQL schema
    pBasicAddress: $basicAddress,
    pState: $state,
    pDistrict: $district,
    pPincode: $pincode,
    pLatitude: $latitude,
    pLongitude: $longitude,
    pVidhansabha: $vidhansabha,
    # Temporary address parameters - Using camelCase to match GraphQL schema  
    pTempBasicAddress: $tempBasicAddress,
    pTempState: $tempState,
    pTempDistrict: $tempDistrict,
    pTempPincode: $tempPincode,
    pTempLatitude: $tempLatitude,
    pTempLongitude: $tempLongitude,
    pTempVidhansabha: $tempVidhansabha
  )
}

# Delete Member (comprehensive deletion with cleanup)
mutation DeleteMember($memberId: String!) {
  deleteMember(pMemberId: $memberId)
}
