query Organisations{
  organisationCollection(orderBy: {priority: AscNullsLast}){
    edges{
      node{
        id
        name
        description
      }
    }
  }
}
query OrganisationsAndMembers{
  memberCollection{
    edges{
      node{
        id
        name
        profile_image
      }
    }
  }
  organisationCollection{
    edges{
      node {
        id
        name
      }
    }
  }
}

query OrganisationDetailById($orgnisationId: String!) {
  organisationCollection(filter: { id: { eq: $orgnisationId } } ){
    edges{
      node{
        id
        name
        logo
        description
        organisational_memberCollection{
          edges{
            node{
              id
              post
              priority
              member{
                id
                name
                email
                phone_number
                profile_image
                educational_qualification
              }
            }
          }
        }
      }
    }
  }
}

query Organisation($filter: organisationFilter) {
  organisationCollection(filter: $filter){
    edges{
      node{
        id
        name
        logo
        description
        organisational_memberCollection{
          edges{
            node{
              id
              post
              priority
              member{
                id
                name
                email
                phone_number
                profile_image
                educational_qualification
              }
            }
          }
        }
      }
    }
  }
}

query LearningItems {
  learningCollection{
    edges{
      node{
        id
        thumbnail_url
        title
      }
    }
  }
}

query LearningItem($filter: learningFilter) {
  learningCollection(filter: $filter){
    edges{
      node{
        id
        thumbnail_url
        title
        video_id
        url
        description
      }
    }
  }
}

fragment OrganisationalActivityShort on activities {
  id
  name
  short_description
  start_datetime
  end_datetime
  type
  district
    state
}

query UpcomingSatrByRegion($state: String!, $district: String, $currentDateTime: Datetime){
  activitiesCollection(
    filter: {
      state: {eq: $state},
      district: {eq: $district},
      start_datetime: {gt: $currentDateTime},
      type: {eq: SESSION}
    }
  ){
    edges{
      node{
        ...OrganisationalActivityShort
      }
    }
  }
}

query OrganisationalActivities($filter: activitiesFilter){
  activitiesCollection(filter: $filter){
    edges{
      node{
        ...OrganisationalActivityShort
      }
    }
  }
}

query OrganisationalActivityDetailById($activityId: String!){
  activitiesCollection(filter: { id: { eq: $activityId } }){
    edges{
      node{
        ...OrganisationalActivityShort
        long_description
        address
        state
        media_files
        additional_instructions
        capacity
        latitude
        longitude
        allowed_gender
        organisational_activityCollection{
          edges{
            node{
              id
              organisation{
                id
                name
              }
            }
          }
        }
        activity_memberCollection{
          edges{
            node{
              id
              post
              priority
              member{
                id
                name
                profile_image
                phone_number
              }
            }
          }
        }
      }
    }
  }
}

query OrganisationalActivityDetail($filter: activitiesFilter){
  activitiesCollection(filter: $filter){
    edges{
      node{
        ...OrganisationalActivityShort
        long_description
        address
        state
        media_files
        additional_instructions
        capacity
        latitude
        longitude
        allowed_gender
        organisational_activityCollection{
          edges{
            node{
              id
              organisation{
                id
                name
              }
            }
          }
        }
        activity_memberCollection{
          edges{
            node{
              id
              post
              priority
              member{
                id
                name
                profile_image
                phone_number
              }
            }
          }
        }
      }
    }
  }
}

query StudentsApplied {
  admissionCollection{
    edges{
      node{
        id
        studentName
        studentPhoto
        previousClass
        marksObtained
      }
    }
  }
}

query AppLabel($labelKey: String!){
  app_labelsCollection(filter: { label_key: { eq: $labelKey } }){
    edges{
      node{
        id
        label_value
      }
    }
  }
}

query BookOrders($filter: book_ordersFilter) {
  book_ordersCollection(filter: $filter) {
    edges {
      node {
        id
        fullname
        address
        city
        district
        state
        pincode
        country
        mobile
        district_officer_name
        district_officer_number
        payment_receipt_url
        created_at
        is_fulfilled
      }
    }
  }
}

query UpcomingSatrActivities($currentDateTime: Datetime!){
  activitiesCollection(filter: { start_datetime: {gt: $currentDateTime} }){
    edges{
      node{
        id
        name
        start_datetime
        end_datetime
        allowed_gender
        district
        state
        latitude
        longitude
        capacity
        satr_registrationCollection{
          pageInfo{
            startCursor
          }
          edges{
            node{
              id
            }
          }
        }
      }
    }
  }
}

query registrationsForActivity($activityId: String!){
  satr_registrationCollection(filter: { activity_id: { eq: $activityId } }){
    edges{
      node{
        id
        fullname
        gender
        address
        mobile
      }
    }
  }
}

fragment MemberShort on member {
  id
  name
  profile_image
}

query members {
  memberCollection {
    edges {
      node {
        ...MemberShort
      }
    }
  }
}

query memberDetail($memberId: String!) {
  memberCollection(filter: {id: {eq: $memberId}}) {
    edges {
      node {
        id
        name
        profile_image
        phone_number
        educational_qualification
        email
        address
        district
        state
        pin
        organisational_memberCollection {
          edges {
            node {
              id
              organisation {
                id
                name
                logo
              }
            }
          }
        }
        activity_memberCollection {
          edges {
            node {
              activities {
                id
                name
                district
                state
                start_datetime
                end_datetime
              }
            }
          }
        }
      }
    }
  }
}

query searchMembers($nameOrPhoneNumber: String!) {
  memberCollection(
    filter: {
      or: [
        {name: {ilike: $nameOrPhoneNumber}},
        {phone_number: {ilike: $nameOrPhoneNumber}}
      ]
    }
  ) {
    edges {
      node {
        ...MemberShort
      }
    }
  }
}
